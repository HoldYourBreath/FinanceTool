repos:
  # --- Python: Ruff (lint) ---
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        name: ruff (lint)
        args: [--fix]
        files: '^backend/.*\.py$'

  # --- Python: Black (use the backend config path) ---
  - repo: https://github.com/psf/black
    rev: 24.8.0
    hooks:
      - id: black
        name: black (backend)
        args: ['--config=backend/pyproject.toml']
        files: '^backend/.*\.py$'

  # --- Frontend: eslint, prettier, tsc ---
  # Use node-managed hooks so CI doesn’t need your repo’s node_modules
  - repo: local
    hooks:
      - id: eslint-frontend
        name: eslint (frontend)
        language: node
        entry: eslint --max-warnings=0 --config frontend/eslint.config.js
        pass_filenames: true
        files: '^frontend/.*\.(ts|tsx|js|jsx)$'
        exclude: '^frontend/(dist|build|node_modules)/|^playwright-report/'
        additional_dependencies:
          - 'eslint@^9'
          - '@eslint/js@^9'
          - 'eslint-plugin-react@^7'
          - 'eslint-plugin-react-hooks@^4'
          - '@typescript-eslint/parser@^8'
          - '@typescript-eslint/eslint-plugin@^8'

      - id: prettier-frontend
        name: prettier (frontend)
        language: node
        entry: prettier --check
        pass_filenames: true
        files: '^frontend/.*\.(ts|tsx|js|jsx|json|css|html|md|yaml|yml)$'
        exclude: '^frontend/(dist|build|node_modules)/|^playwright-report/'
        additional_dependencies:
          - 'prettier@^3'

      - id: tsc-frontend
        name: typecheck (frontend)
        language: node
        entry: tsc -p frontend/tsconfig.json --noEmit
        pass_filenames: false
        files: '^frontend/'
        additional_dependencies:
          - typescript@~5.6
          - '@types/node@^20'
          - '@types/react@^18'
          - '@types/react-dom@^18'
          - 'vite@^5'
          - '@playwright/test@^1.47'
